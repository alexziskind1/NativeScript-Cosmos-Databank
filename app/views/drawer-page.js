"use strict";
var drawer_over_navigation_model_1 = require("../view-models/drawer-over-navigation-model");
var permissions = require("nativescript-permissions");
var vm = new drawer_over_navigation_model_1.DrawerOverNavigationModel();
function onPageLoaded(args) {
    var page = args.object;
    var currentUser = page.navigationContext;
    vm.set("currentUser", currentUser);
    page.bindingContext = vm;
}
exports.onPageLoaded = onPageLoaded;
function onPageNavigatedTo(args) {
    var page = args.object;
    permissions.requestPermission([
        "android.permission.INTERNET",
        "android.permission.READ_EXTERNAL_STORAGE",
        "android.permission.WRITE_EXTERNAL_STORAGE",
        "android.permission.SET_WALLPAPER",
        "android.permission.ACCESS_NETWORK_STATE"
    ], "I need these permissions")
        .then(function (res) {
        console.log("Permissions granted!");
    })
        .catch(function () {
        console.log("No permissions - plan B time!");
    });
}
exports.onPageNavigatedTo = onPageNavigatedTo;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhd2VyLXBhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkcmF3ZXItcGFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsNEZBQXdGO0FBR3hGLElBQUksV0FBVyxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBRXRELElBQUksRUFBRSxHQUFHLElBQUksd0RBQXlCLEVBQUUsQ0FBQztBQUV6QyxzQkFBNkIsSUFBSTtJQUM3QixJQUFJLElBQUksR0FBUyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBRTdCLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztJQUN6QyxFQUFFLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUVuQyxJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUM3QixDQUFDO0FBUEQsb0NBT0M7QUFFRCwyQkFBa0MsSUFBSTtJQUNsQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBRXZCLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQztRQUMxQiw2QkFBNkI7UUFDN0IsMENBQTBDO1FBQzFDLDJDQUEyQztRQUMzQyxrQ0FBa0M7UUFDbEMseUNBQXlDO0tBQzVDLEVBQUUsMEJBQTBCLENBQUM7U0FDekIsSUFBSSxDQUFDLFVBQVUsR0FBRztRQUNmLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUN4QyxDQUFDLENBQUM7U0FDRCxLQUFLLENBQUM7UUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLCtCQUErQixDQUFDLENBQUM7SUFDakQsQ0FBQyxDQUFDLENBQUM7QUFDWCxDQUFDO0FBaEJELDhDQWdCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERyYXdlck92ZXJOYXZpZ2F0aW9uTW9kZWwgfSBmcm9tIFwiLi4vdmlldy1tb2RlbHMvZHJhd2VyLW92ZXItbmF2aWdhdGlvbi1tb2RlbFwiO1xyXG5pbXBvcnQgeyBQYWdlIH0gZnJvbSBcInVpL3BhZ2VcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi9tb2RlbHMvbG9naW4vdXNlclwiXHJcbnZhciBwZXJtaXNzaW9ucyA9IHJlcXVpcmUoXCJuYXRpdmVzY3JpcHQtcGVybWlzc2lvbnNcIik7XHJcblxyXG5sZXQgdm0gPSBuZXcgRHJhd2VyT3Zlck5hdmlnYXRpb25Nb2RlbCgpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9uUGFnZUxvYWRlZChhcmdzKSB7XHJcbiAgICB2YXIgcGFnZSA9IDxQYWdlPmFyZ3Mub2JqZWN0O1xyXG5cclxuICAgIHZhciBjdXJyZW50VXNlciA9IHBhZ2UubmF2aWdhdGlvbkNvbnRleHQ7XHJcbiAgICB2bS5zZXQoXCJjdXJyZW50VXNlclwiLCBjdXJyZW50VXNlcik7IFxyXG4gICAgICBcclxuICAgIHBhZ2UuYmluZGluZ0NvbnRleHQgPSB2bTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9uUGFnZU5hdmlnYXRlZFRvKGFyZ3MpIHtcclxuICAgIGxldCBwYWdlID0gYXJncy5vYmplY3Q7XHJcblxyXG4gICAgcGVybWlzc2lvbnMucmVxdWVzdFBlcm1pc3Npb24oW1xyXG4gICAgICAgIFwiYW5kcm9pZC5wZXJtaXNzaW9uLklOVEVSTkVUXCIsXHJcbiAgICAgICAgXCJhbmRyb2lkLnBlcm1pc3Npb24uUkVBRF9FWFRFUk5BTF9TVE9SQUdFXCIsXHJcbiAgICAgICAgXCJhbmRyb2lkLnBlcm1pc3Npb24uV1JJVEVfRVhURVJOQUxfU1RPUkFHRVwiLFxyXG4gICAgICAgIFwiYW5kcm9pZC5wZXJtaXNzaW9uLlNFVF9XQUxMUEFQRVJcIixcclxuICAgICAgICBcImFuZHJvaWQucGVybWlzc2lvbi5BQ0NFU1NfTkVUV09SS19TVEFURVwiXHJcbiAgICBdLCBcIkkgbmVlZCB0aGVzZSBwZXJtaXNzaW9uc1wiKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQZXJtaXNzaW9ucyBncmFudGVkIVwiKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm8gcGVybWlzc2lvbnMgLSBwbGFuIEIgdGltZSFcIik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuIl19