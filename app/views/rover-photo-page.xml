<Page xmlns="http://schemas.nativescript.org/tns.xsd"
      xmlns:nativescript-fresco="nativescript-fresco" 
      xmlns:Card="nativescript-cardview"
      loaded="onLoaded">
    <Page.actionBar>
        <ActionBar title="Mars rovers" icon="res://opportuity">
            <!--<ActionBar.actionItems>
                <ActionItem icon="" text="Left" tap="" ios.position="left" />
                <ActionItem icon="" text="Right" tap="" ios.position="right" />
            </ActionBar.actionItems>-->
        </ActionBar>
    </Page.actionBar>
    <GridLayout rows="132, *" columns="*">

        <GridLayout class="gridmenu" row="0" col="0" rows="44, 88" columns="2*, *">
            <ListPicker id="rovers-listpicker" row="0" col="0" colSpan="2" items="{{ rovers }}" selectedIndex="0"></ListPicker>       
            <DatePicker id="rovers-datepicker" row="1" col="0" day="{{ day }}" month="{{ month }}" year="{{ year }}"></DatePicker>
            <Button  row="1" col="1" text="Get Photos" tap="getPhotosForDate" />
        </GridLayout>

        <ListView row="1" col="0" items="{{ dataItems }}" class="listview" loaded="onListLoaded" itemLoading="onItemLoading" itemTap="onItemTap">
          <ListView.itemTemplate>
            <Card:CardView class="cardStyle" margin="8" elevation="40" radius="50">
                <android>
                    <GridLayout rows="44, *" columns="2*, *">
                        <Label row="0" col="0" text="{{ cameraName }}" class="camera" textWrap="true" />
                        <Label row="0" col="1" text="{{ earthDate }}" class="date" textWrap="true" />
                        <nativescript-fresco:FrescoDrawee row="1" col="0" colSpan="2"
                                                            imageUri="{{ imageUri }}"
                                                            backgroundUri="res://logo"
                                                            actualImageScaleType="centerCrop"                                                           
                                                            verticalAlignment="top"
                                                            aspectRatio="1.5"
                                                            roundedCornerRadius="50"
                                                            roundBottomRight="true"
                                                            roundBottomLeft="true"
                                                            showProgressBar="true"
                                                            tapToRetryEnabled="true"
                                                            finalImageSet="onFinalImageSet"/>
                    </GridLayout>
                </android>
                <ios>
                    <GridLayout rows="44, *" columns="2*, *">
                        <Label row="0" col="0" text="{{ cameraName }}" class="camera" textWrap="true" />
                        <Label row="0" col="1" text="{{ earthDate }}" class="date" textWrap="true" />
                        <Image row="1" col="0" colSpan="2"  src="{{ imageUri }}" verticalAlignment="top"/>
                    </GridLayout>
                </ios>
            </Card:CardView>                                      
          </ListView.itemTemplate>
        </ListView>
    </GridLayout>
</Page>